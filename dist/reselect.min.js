/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2015-12-25T00:33:15.165Z
 * License: MIT
 */
!function(){"use strict";var e=angular.module("Reselect",["reselect.templates"]),t=function(e,t){var r=e.reselect=this;r.options=angular.extend({},e.reselectOptions,t),r.rendered_placeholder=r.options.placeholderTemplate()};t.$inject=["$scope","reselectDefaultOptions"],angular.module("reselect.controller",[]).controller("reselect.directive.ctrl",t),e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"}}).directive("reselect",[function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^ngModel"],transclude:!0,scope:{ngModel:"=",reselectOptions:"="},compile:function(e,t,r){return function(e,t){r(e,function(e){t.append(e[1])})}},controllerAs:"reselect",controller:["$scope","reselectDefaultOptions",function(e,t){var r=this;return r.options=angular.extend({},e.reselectOptions,t),r.rendered_placeholder=r.options.placeholderTemplate(),r.selectValue=function(t){e.ngModel=t},r}]}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection"><div class="reselect-rendered reselect-rendered-selection" ng-if="false" ng-bind="reselect.rendered_selection"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-if="true" ng-bind="reselect.rendered_placeholder"></div><div class="reselect-input-container"><input class="reselect-text-input" readonly="readonly" ng-if="true"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-options-container"><ul class="reselect-options-list"></ul></div>')}]),e.value("reselectChoicesOptions",{}),e.directive("reselectChoices",["ChoiceParser","$compile",function(e,t){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:"^reselect",transclude:!0,compile:function(r,c){if(!c.options)throw new Error('"reselect-options" directive requires the [options] attribute.');return function(r,c,i,l,s){var n,o=r.choices;s(function(e){n=angular.element("<div></div>").append(e).html()}),o.ReselectCtrl=l,o.parsedOptions=e.parse(i.options),o.choices=o.parsedOptions.source(r.$parent);var a=c[0],p=angular.element(a.querySelectorAll(".reselect-options-container")),u=angular.element(a.querySelectorAll(".reselect-options-list"));o.choiceHeight=32,o.listHeight=300;var d=Math.ceil((o.listHeight+o.choiceHeight)/o.choiceHeight);o.CHOICE_TEMPLATE='<li class="reselect-option reselect-option-choice"></li>',p.css("height",o.listHeight+"px"),u.css("height",o.choiceHeight*o.choices.length+"px"),o.lazyContainers=[],o._calculate=function(){for(var e=0;d>e;e++){var c=angular.element(o.CHOICE_TEMPLATE);c.append(n);var i=r.$new();t(c)(i),o.lazyContainers.push({element:c,scope:i}),u.append(c)}};var h=null;o._calculateLazyRender=function(){var e=p[0].scrollTop;if(!("number"==typeof h&&e<=h+o.choiceHeight&&e>=h-o.choiceHeight)){console.clear(),console.log("render");var t=[],r=[];angular.forEach(o.lazyContainers,function(c,i){var l=(c.index+1)*o.choiceHeight||0;console.debug("Container #"+(i+1)+": ",l),angular.isUndefined(c.index)||l<e-o.choiceHeight||l>e+o.listHeight+o.choiceHeight?r.push(c):t.push(c)});for(var c=t.map(function(e){return e.index}),i=Math.abs(Math.floor((e-o.choiceHeight)/o.choiceHeight))-1,l=(0>=i?0:i)+d,s=i;l>s;s++)if(!(c.indexOf(s)>=0)){var n=r.shift();n&&(n.element.css("top",s*o.choiceHeight+"px"),n.index=s,n.scope.$choice={text:"Option "+s},n.scope.$evalAsync())}h=e}},p.on("scroll",function(){window.requestAnimationFrame(function(){o._calculateLazyRender()})}),o._calculate(),o._calculateLazyRender()}},controller:["$scope","$timeout",function(e){e.choices=this}]}}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){{var r;/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(t)}return r=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),{itemName:r[4]||r[2],keyName:r[3],source:e(r[3]?r[6]:r[5]),sourceName:r[6],filters:r[7],trackByExp:r[8],modelMapper:e(r[1]||r[4]||r[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}])}();
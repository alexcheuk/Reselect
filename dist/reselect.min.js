/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2016-03-29T06:35:48.334Z
 * License: MIT
 */
!function(){"use strict";var e=angular.module("Reselect",["reselect.templates"]),t=function(e,t){var n=e.reselect=this;n.options=angular.extend({},e.reselectOptions,t),n.rendered_placeholder=n.options.placeholderTemplate()};t.$inject=["$scope","reselectDefaultOptions"],angular.module("reselect.controller",[]).controller("reselect.directive.ctrl",t),e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"},selectionTemplate:function(e){return e.text}}).directive("reselect",[function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,replace:!0,scope:{ngModel:"=",reselectOptions:"="},compile:function(e,t,n){return function(e,t){n(e,function(e){t.append(e[1])})}},controllerAs:"$reselect",controller:["$scope","reselectDefaultOptions","$timeout",function(e,t){var n=this;return n.options=angular.extend({},e.reselectOptions,t),n.opened=!1,n.rendered_placeholder=n.options.placeholderTemplate(),n.rendered_selection=null,n.value=null,n.selectValue=function(t){n.value=t,n.rendered_selection=n.options.selectionTemplate(n.value),e.ngModel=t},n.parsedOptions=null,n.choices=[],n.toggleDropdown=function(){e.$broadcast("reselect.options."+(n.opened?"hide":"show")),n.opened=!n.opened},n}]}}]),e.value("reselectChoicesOptions",{}),e.service("LazyContainer",[function(){var e=function(e){var t=this;t.containerId=null,t.element=null,t.index=null,t.scope=null,angular.extend(t,e)};return e.prototype.render=function(e){var t=this;(t.element||null!==t.index)&&t.element.css("top",t.index*e+"px")},e}]),e.directive("reselectChoices",["ChoiceParser","$compile","LazyContainer",function(e,t,n){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:"^reselect",transclude:!0,replace:!0,compile:function(i,c){if(!c.options)throw new Error('"reselect-options" directive requires the [options] attribute.');return function(i,c,l,r,o){var s=i.$options={};s.CHOICE_TEMPLATE=null,o(function(e){s.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="$options._selectChoice($containerId)"></li>'),s.CHOICE_TEMPLATE.attr("ng-class","{'reselect-option-choice--highlight' : $options.activeIndex === $index }"),s.CHOICE_TEMPLATE.attr("ng-mouseenter","$options.activeIndex = $index"),s.CHOICE_TEMPLATE.attr("ng-mouseleave","$options.activeIndex = null"),s.CHOICE_TEMPLATE.append(e)}),s.element=c[0],s.$container=angular.element(s.element.querySelectorAll(".reselect-options-container")),s.$list=angular.element(s.element.querySelectorAll(".reselect-options-list")),s.choiceHeight=36,s.listHeight=300,r.parsedOptions=e.parse(l.options),r.choices=r.parsedOptions.source(i.$parent)||[],i.$watchCollection(function(){return r.parsedOptions.source(i.$parent)},function(e){r.choices=e||[],s.render(),s._calculateLazyRender(!0)}),s.lazyContainers=[],s.numLazyContainers=Math.ceil(s.listHeight/s.choiceHeight)+2,s._renderDropdown=function(){var e=r.choices.length*s.choiceHeight,t=e>s.listHeight?s.listHeight:e;s.$container.css("height",(t||32)+"px"),s.$list.css("height",e+"px")},s._initLazyContainers=function(){for(var e=0;e<s.numLazyContainers;e++){var c=s.CHOICE_TEMPLATE.clone(),l=i.$new();l.$choice={},t(c)(l),s.lazyContainers.push(new n({containerId:e,element:c,scope:l})),s.$list.append(c)}},s._initLazyContainers();var a,d=null,p=null;s._shouldRender=function(e){return"number"==typeof d&&e<=d+(s.choiceHeight-d%s.choiceHeight)&&e>=d-d%s.choiceHeight},s._calculateLazyRender=function(e){var t=s.$container[0].scrollTop;if(t>a?p="down":a>t&&(p="up"),a=t,e===!0||!s._shouldRender()){var n=[],c=[];angular.forEach(s.lazyContainers,function(e){var i=e.index*s.choiceHeight||0;null===e.index||i<t-s.choiceHeight||i>t+s.listHeight+s.choiceHeight?(e.element.addClass("inactive").removeClass("active"),c.push(e)):(e.element.addClass("active").removeClass("inactive"),n.push(e))});var l=n.map(function(e){return e.index}),o=Math.floor(t/s.choiceHeight);o=0>o?0:o;var u=Math.ceil((t+s.listHeight)/s.choiceHeight);u=u>=r.choices.length?r.choices.length:u;for(var h=o;u>h;h++)if(!(l.indexOf(h)>=0)){var v=c.shift();v&&(v.element.addClass("active").removeClass("inactive"),v.index=h,v.render(s.choiceHeight),angular.extend(v.scope,{$containerId:v.containerId,$index:h}),angular.extend(v.scope.$choice,r.choices[h]))}i.$evalAsync(),d=Math.floor(t/s.choiceHeight)*s.choiceHeight}},s.$container.on("scroll",function(){window.requestAnimationFrame(function(){s._calculateLazyRender()})}),s._calculateLazyRender(),s.activeIndex=null,s._setActiveIndex=function(e){s.activeIndex=e},s._selectChoice=function(e){var t=angular.copy(s.lazyContainers[e].scope.$eval(l.value));r.selectValue(t)},s.$parent=c.parent(),s.render=function(){s._renderDropdown()},i.$on("reselect.options.show",function(){s.show()}),i.$on("reselect.options.hide",function(){s.hide()}),s.show=function(){s.$parent.append(c),a&&(s.$container[0].scrollTop=a)},s.hide=function(){c.detach()}}}}}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){{var n;/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(t)}return n=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),{itemName:n[4]||n[2],keyName:n[3],source:e(n[3]?n[6]:n[5]),sourceName:n[6],filters:n[7],trackByExp:n[8],modelMapper:e(n[1]||n[4]||n[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/lazy-container.tpl.html",'<div class="reselect-dropdown"><div class="reselect-options-container"><div class="reselect-option reselect-option-choice" ng-show="!$reselect.choices.length">No Options</div><ul class="reselect-options-list"></ul></div></div>'),e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container reselect" ng-click="$reselect.toggleDropdown()"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection"><div class="reselect-rendered reselect-rendered-selection" ng-if="$reselect.value" ng-bind="$reselect.rendered_selection"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-if="!$reselect.value" ng-bind="$reselect.rendered_placeholder"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-dropdown"><div class="reselect-options-container"><div class="reselect-option reselect-option-choice" ng-show="!$reselect.choices.length">No Options</div><ul class="reselect-options-list"></ul></div></div>')}])}();
/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2015-12-30T12:30:17.106Z
 * License: MIT
 */
!function(){"use strict";var e=angular.module("Reselect",["reselect.templates"]);e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"}}).directive("reselect",[function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,replace:!0,scope:{ngModel:"=",reselectOptions:"="},compile:function(e,t,n){return function(e,t){n(e,function(e){t.append(e[1])})}},controllerAs:"$reselect",controller:["$scope","reselectDefaultOptions","$timeout",function(e,t){var n=this;return n.options=angular.extend({},e.reselectOptions,t),n.opened=!1,n.rendered_placeholder=n.options.placeholderTemplate(),n.value=null,n.selectValue=function(t){n.value=t,e.ngModel=t},n.parsedOptions=null,n.choices=[],n.toggleDropdown=function(){e.$broadcast("reselect.options."+(n.opened?"hide":"show")),n.opened=!n.opened},n}]}}]),e.value("reselectChoicesOptions",{}),e.service("LazyContainer",[function(){var e=function(e){var t=this;t.containerId=null,t.element=null,t.index=null,t.scope=null,angular.extend(t,e)};return e.prototype.render=function(e){var t=this;(t.element||null!==t.index)&&t.element.css("top",t.index*e+"px")},e}]),e.directive("reselectChoices",["ChoiceParser","$compile","LazyContainer",function(e,t,n){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:"^reselect",transclude:!0,replace:!0,compile:function(i,c){if(!c.options)throw new Error('"reselect-options" directive requires the [options] attribute.');return function(i,c,r,o,s){var l=i.$options={};l.CHOICE_TEMPLATE=null,s(function(e){l.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="$options._selectChoice($containerId)"></li>'),l.CHOICE_TEMPLATE.attr("ng-class","{'reselect-option-choice--highlight' : $options.activeIndex === $index }"),l.CHOICE_TEMPLATE.attr("ng-mouseenter","$options.activeIndex = $index"),l.CHOICE_TEMPLATE.attr("ng-mouseleave","$options.activeIndex = null"),l.CHOICE_TEMPLATE.append(e)}),l.element=c[0],l.$container=angular.element(l.element.querySelectorAll(".reselect-options-container")),l.$list=angular.element(l.element.querySelectorAll(".reselect-options-list")),l.choiceHeight=32,l.listHeight=300,o.parsedOptions=e.parse(r.options),o.choices=o.parsedOptions.source(i.$parent)||[],i.$watchCollection(function(){return o.parsedOptions.source(i.$parent)},function(e){o.choices=e||[],l.render()}),l.lazyContainers=[],l.numLazyContainers=Math.ceil(l.listHeight/l.choiceHeight)+2,l._renderDropdown=function(){var e=o.choices.length*l.choiceHeight,t=e>l.listHeight?l.listHeight:e;l.$container.css("height",t||"32px"),l.$list.css("height",e+"px")},l._initLazyContainers=function(){for(var e=0;e<l.numLazyContainers;e++){var c=l.CHOICE_TEMPLATE.clone(),r=i.$new();r.$choice={},t(c)(r),l.lazyContainers.push(new n({containerId:e,element:c,scope:r})),l.$list.append(c)}},l._initLazyContainers();var a,p=null,d=null;l._calculateLazyRender=function(){var e=l.$container[0].scrollTop;if(e>a?d="down":a>e&&(d="up"),a=e,!("number"==typeof p&&e<=p+l.choiceHeight&&e>=p-l.choiceHeight)){var t=[],n=[];angular.forEach(l.lazyContainers,function(i){var c=i.index*l.choiceHeight||0;null===i.index||c<e-l.choiceHeight||c>e+l.listHeight+l.choiceHeight?(i.element.addClass("inactive").removeClass("active"),n.push(i)):(i.element.addClass("active").removeClass("inactive"),t.push(i))});var c=t.map(function(e){return e.index}),r=Math.floor(e/l.choiceHeight);r=0>r?0:r;var s=Math.ceil((e+l.listHeight)/l.choiceHeight);s=s>=o.choices.length?o.choices.length:s;for(var u=r;s>u;u++)if(!(c.indexOf(u)>=0)){var h=n.shift();h&&(h.element.addClass("active").removeClass("inactive"),h.index=u,h.render(l.choiceHeight),angular.extend(h.scope,{$containerId:h.containerId,$index:u}),angular.extend(h.scope.$choice,o.choices[u]))}i.$evalAsync(),p=Math.floor(e/l.choiceHeight)*l.choiceHeight}},l.$container.on("scroll",function(){window.requestAnimationFrame(function(){l._calculateLazyRender()})}),l._calculateLazyRender(),l.activeIndex=null,l._setActiveIndex=function(e){l.activeIndex=e},l._selectChoice=function(e){var t=angular.copy(l.lazyContainers[e].scope.$eval(r.value));o.selectValue(t)},l.$parent=c.parent(),l.render=function(){l._renderDropdown()},i.$on("reselect.options.show",function(){l.show()}),i.$on("reselect.options.hide",function(){l.hide()}),l.show=function(){l.$parent.append(c)},l.hide=function(){c.detach()}}}}}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){{var n;/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(t)}return n=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),{itemName:n[4]||n[2],keyName:n[3],source:e(n[3]?n[6]:n[5]),sourceName:n[6],filters:n[7],trackByExp:n[8],modelMapper:e(n[1]||n[4]||n[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container reselect" ng-click="$reselect.toggleDropdown()"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection"><div class="reselect-rendered reselect-rendered-selection" ng-if="false" ng-bind="reselect.rendered_selection"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-if="true" ng-bind="reselect.rendered_placeholder"></div><div class="reselect-input-container"><input class="reselect-text-input" readonly="readonly" ng-if="true"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-dropdown"><div class="reselect-options-container"><div class="reselect-option reselect-option-choice" ng-show="!$reselect.choices.length">No Options</div><ul class="reselect-options-list"></ul></div></div>')}])}();
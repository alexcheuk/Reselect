/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2015-12-25T12:09:40.072Z
 * License: MIT
 */
!function(){"use strict";var e=angular.module("Reselect",["reselect.templates"]),t=function(e,t){var c=e.reselect=this;c.options=angular.extend({},e.reselectOptions,t),c.rendered_placeholder=c.options.placeholderTemplate()};t.$inject=["$scope","reselectDefaultOptions"],angular.module("reselect.controller",[]).controller("reselect.directive.ctrl",t),e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"}}).directive("reselect",[function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,scope:{ngModel:"=",reselectOptions:"="},compile:function(e,t,c){return function(e,t){c(e,function(e){t.append(e[1])})}},controllerAs:"$reselect",controller:["$scope","reselectDefaultOptions",function(e,t){var c=this;return c.options=angular.extend({},e.reselectOptions,t),c.rendered_placeholder=c.options.placeholderTemplate(),c.selectValue=function(t){e.ngModel=t},c}]}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection"><div class="reselect-rendered reselect-rendered-selection" ng-if="false" ng-bind="reselect.rendered_selection"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-if="true" ng-bind="reselect.rendered_placeholder"></div><div class="reselect-input-container"><input class="reselect-text-input" readonly="readonly" ng-if="true"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-options-container"><ul class="reselect-options-list"></ul></div>')}]),e.value("reselectChoicesOptions",{}),e.directive("reselectChoices",["ChoiceParser","$compile",function(e,t){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:"^reselect",transclude:!0,compile:function(c,i){if(!i.options)throw new Error('"reselect-options" directive requires the [options] attribute.');return function(c,i,l,r,n){var s=c.choices={};s.CHOICE_TEMPLATE=null,n(function(e){s.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="choices.selectChoice($containerId)"></li>'),s.CHOICE_TEMPLATE.append(e)}),s.parsedOptions=e.parse(l.options),s.choices=s.parsedOptions.source(c.$parent);var o=i[0],a=angular.element(o.querySelectorAll(".reselect-options-container")),p=angular.element(o.querySelectorAll(".reselect-options-list"));s.choiceHeight=32,s.listHeight=300;var d=Math.ceil(s.listHeight/s.choiceHeight)+2;s.selectChoice=function(e){var t=angular.copy(s.lazyContainers[e].scope.$eval(l.value));r.selectValue(t)},a.css("height",s.listHeight+"px"),p.css("height",s.choiceHeight*s.choices.length+"px"),s.lazyContainers=[],s._calculate=function(){for(var e=0;d>e;e++){var i=s.CHOICE_TEMPLATE.clone(),l=c.$new();l.$choice={},t(i)(l),s.lazyContainers.push({containerId:e,element:i,scope:l}),p.append(i)}};var u,h=null,v=null;s._calculateLazyRender=function(){var e=a[0].scrollTop;if(e>u?v="down":u>e&&(v="up"),u=e,!("number"==typeof h&&e<=h+s.choiceHeight&&e>=h-s.choiceHeight)){var t=[],c=[];angular.forEach(s.lazyContainers,function(i){var l=i.index*s.choiceHeight||0;angular.isUndefined(i.index)||l<e-s.choiceHeight||l>e+s.listHeight+s.choiceHeight?(i.element.addClass("inactive").removeClass("active"),c.push(i)):(i.element.addClass("active").removeClass("inactive"),t.push(i))});var i=t.map(function(e){return e.index}),l=Math.floor(e/s.choiceHeight);l=0>l?0:l;var r=Math.ceil((e+s.listHeight)/s.choiceHeight);r=r>=s.choices.length?s.choices.length:r,console.log("Index Start",l),console.log("Index End",r);for(var n=l;r>n;n++)if(!(i.indexOf(n)>=0)){var o=c.shift();o&&(o.element.addClass("active").removeClass("inactive"),o.element.css("top",n*s.choiceHeight+"px"),o.index=n,o.scope.$containerId=o.containerId,o.scope.$index=n,angular.extend(o.scope.$choice,s.choices[n]),o.scope.$evalAsync())}h=Math.floor(e/s.choiceHeight)*s.choiceHeight}},a.on("scroll",function(){window.requestAnimationFrame(function(){s._calculateLazyRender()})}),window.up=s._calculateLazyRender,s._calculate(),s._calculateLazyRender()}}}}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){{var c;/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(t)}return c=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),{itemName:c[4]||c[2],keyName:c[3],source:e(c[3]?c[6]:c[5]),sourceName:c[6],filters:c[7],trackByExp:c[8],modelMapper:e(c[1]||c[4]||c[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}])}();
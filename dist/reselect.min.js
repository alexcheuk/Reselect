/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2015-12-25T05:27:21.744Z
 * License: MIT
 */
!function(){"use strict";var e=angular.module("Reselect",["reselect.templates"]),t=function(e,t){var c=e.reselect=this;c.options=angular.extend({},e.reselectOptions,t),c.rendered_placeholder=c.options.placeholderTemplate()};t.$inject=["$scope","reselectDefaultOptions"],angular.module("reselect.controller",[]).controller("reselect.directive.ctrl",t),e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"}}).directive("reselect",[function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,scope:{ngModel:"=",reselectOptions:"="},compile:function(e,t,c){return function(e,t){c(e,function(e){t.append(e[1])})}},controllerAs:"$reselect",controller:["$scope","reselectDefaultOptions",function(e,t){var c=this;return c.options=angular.extend({},e.reselectOptions,t),c.rendered_placeholder=c.options.placeholderTemplate(),c.selectValue=function(t){e.ngModel=t},c}]}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection"><div class="reselect-rendered reselect-rendered-selection" ng-if="false" ng-bind="reselect.rendered_selection"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-if="true" ng-bind="reselect.rendered_placeholder"></div><div class="reselect-input-container"><input class="reselect-text-input" readonly="readonly" ng-if="true"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-options-container"><ul class="reselect-options-list"></ul></div>')}]),e.value("reselectChoicesOptions",{}),e.directive("reselectChoices",["ChoiceParser","$compile",function(e,t){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:"^reselect",transclude:!0,compile:function(c,i){if(!i.options)throw new Error('"reselect-options" directive requires the [options] attribute.');return function(c,i,r,l,s){var n=c.choices={};n.CHOICE_TEMPLATE=null,s(function(e){n.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="choices.selectChoice($containerId)"></li>'),n.CHOICE_TEMPLATE.append(e)}),n.parsedOptions=e.parse(r.options),n.choices=n.parsedOptions.source(c.$parent);var o=i[0],a=angular.element(o.querySelectorAll(".reselect-options-container")),p=angular.element(o.querySelectorAll(".reselect-options-list"));n.choiceHeight=32,n.listHeight=300;var u=Math.ceil(n.listHeight/n.choiceHeight)+2;n.selectChoice=function(e){var t=angular.copy(n.lazyContainers[e].scope.$eval(r.value));l.selectValue(t)},a.css("height",n.listHeight+"px"),p.css("height",n.choiceHeight*n.choices.length+"px"),n.lazyContainers=[],n._calculate=function(){for(var e=0;u>e;e++){var i=n.CHOICE_TEMPLATE.clone(),r=c.$new();r.$choice={},t(i)(r),n.lazyContainers.push({containerId:e,element:i,scope:r}),p.append(i)}};var d,h=null,v=null;n._calculateLazyRender=function(){var e=a[0].scrollTop;if(e>d?v="down":d>e&&(v="up"),d=e,!("number"==typeof h&&e<=h+n.choiceHeight&&e>=h-n.choiceHeight)){var t=[],c=[];angular.forEach(n.lazyContainers,function(i){var r=i.index*n.choiceHeight||0;angular.isUndefined(i.index)||r<e-n.choiceHeight||r>e+n.listHeight+n.choiceHeight?(i.element.addClass("inactive").removeClass("active"),c.push(i)):(i.element.addClass("active").removeClass("inactive"),t.push(i))});var i=t.map(function(e){return e.index}),r=Math.floor(e/n.choiceHeight);r=0>r?0:r;var l=Math.ceil((e+n.listHeight)/n.choiceHeight);l=l>=n.choices.length?n.choices.length:l;for(var s=r;l>s;s++)if(!(i.indexOf(s)>=0)){var o=c.shift();o&&(o.element.addClass("active").removeClass("inactive"),o.element.css("top",s*n.choiceHeight+"px"),o.index=s,o.scope.$containerId=o.containerId,o.scope.$index=s,angular.extend(o.scope.$choice,n.choices[s]),o.scope.$evalAsync())}h=e}},a.on("scroll",function(){window.requestAnimationFrame(function(){n._calculateLazyRender()})}),window.up=n._calculateLazyRender,n._calculate(),n._calculateLazyRender()}}}}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){{var c;/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(t)}return c=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),{itemName:c[4]||c[2],keyName:c[3],source:e(c[3]?c[6]:c[5]),sourceName:c[6],filters:c[7],trackByExp:c[8],modelMapper:e(c[1]||c[4]||c[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}])}();
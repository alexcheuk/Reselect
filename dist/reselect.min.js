/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2016-06-14T23:59:24.276Z
 * License: MIT
 */
(function(){"use strict";!function(e){function t(){console.log.apply(console,arguments)}function o(e,t){var o,n,i,s;for(this.list=e,this.options=t=t||{},o=0,s=["sort","shouldSort","verbose","tokenize"],n=s.length;n>o;o++)i=s[o],this.options[i]=i in t?t[i]:c[i];for(o=0,s=["searchFn","sortFn","keys","getFn","include"],n=s.length;n>o;o++)i=s[o],this.options[i]=t[i]||c[i]}function n(e,t,o){var s,r,c,a,l,p;if(t){if(c=t.indexOf("."),-1!==c?(s=t.slice(0,c),r=t.slice(c+1)):s=t,a=e[s],null!==a&&void 0!==a)if(r||"string"!=typeof a&&"number"!=typeof a)if(i(a))for(l=0,p=a.length;p>l;l++)n(a[l],r,o);else r&&n(a,r,o);else o.push(a)}else o.push(e);return o}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e,t){t=t||{},this.options=t,this.options.location=t.location||s.defaultOptions.location,this.options.distance="distance"in t?t.distance:s.defaultOptions.distance,this.options.threshold="threshold"in t?t.threshold:s.defaultOptions.threshold,this.options.maxPatternLength=t.maxPatternLength||s.defaultOptions.maxPatternLength,this.pattern=t.caseSensitive?e:e.toLowerCase(),this.patternLen=e.length,this.patternLen<=this.options.maxPatternLength&&(this.matchmask=1<<this.patternLen-1,this.patternAlphabet=this._calculatePatternAlphabet())}var r=/ +/g,c={id:null,caseSensitive:!1,include:[],shouldSort:!0,searchFn:s,sortFn:function(e,t){return e.score-t.score},getFn:n,keys:[],verbose:!1,tokenize:!1};o.VERSION="2.2.0",o.prototype.set=function(e){return this.list=e,e},o.prototype.search=function(e){this.options.verbose&&t("\nSearch term:",e,"\n"),this.pattern=e,this.results=[],this.resultMap={},this._keyMap=null,this._prepareSearchers(),this._startSearch(),this._computeScore(),this._sort();var o=this._format();return o},o.prototype._prepareSearchers=function(){var e=this.options,t=this.pattern,o=e.searchFn,n=t.split(r),i=0,s=n.length;if(this.options.tokenize)for(this.tokenSearchers=[];s>i;i++)this.tokenSearchers.push(new o(n[i],e));this.fullSeacher=new o(t,e)},o.prototype._startSearch=function(){var e,t,o,n,i=this.options,s=i.getFn,r=this.list,c=r.length,a=this.options.keys,l=a.length,p=null;if("string"==typeof r[0])for(o=0;c>o;o++)this._analyze("",r[o],o,o);else for(this._keyMap={},o=0;c>o;o++)for(p=r[o],n=0;l>n;n++){if(e=a[n],"string"!=typeof e){if(t=1-e.weight||1,this._keyMap[e.name]={weight:t},e.weight<=0||e.weight>1)throw new Error("Key weight has to be > 0 and <= 1");e=e.name}else this._keyMap[e]={weight:1};this._analyze(e,s(p,e,[]),p,o)}},o.prototype._analyze=function(e,o,n,s){var c,a,l,p,h,d,u,f,g,v,m,$,y,w,D,C=this.options,A=!1;if(void 0!==o&&null!==o)if(a=[],"string"==typeof o){if(c=o.split(r),C.verbose&&t("---------\nKey:",e),C.verbose&&t("Record:",c),this.options.tokenize){for(l=this.tokenSearchers,p=l.length,w=0;w<this.tokenSearchers.length;w++){for(v=this.tokenSearchers[w],m=[],D=0;D<c.length;D++)$=c[D],y=v.search($),y.isMatch?(A=!0,m.push(y.score),a.push(y.score)):(m.push(1),a.push(1));C.verbose&&t("Token scores:",m)}for(d=a[0],f=a.length,w=1;f>w;w++)d+=a[w];d/=f,C.verbose&&t("Token score average:",d)}g=this.fullSeacher.search(o),C.verbose&&t("Full text score:",g.score),u=g.score,void 0!==d&&(u=(u+d)/2),C.verbose&&t("Score average:",u),(A||g.isMatch)&&(h=this.resultMap[s],h?h.output.push({key:e,score:u,matchedIndices:g.matchedIndices}):(this.resultMap[s]={item:n,output:[{key:e,score:u,matchedIndices:g.matchedIndices}]},this.results.push(this.resultMap[s])))}else if(i(o))for(w=0;w<o.length;w++)this._analyze(e,o[w],n,s)},o.prototype._computeScore=function(){var e,o,n,i,s,r,c,a,l,p=this._keyMap,h=this.results;for(this.options.verbose&&t("\n\nComputing score:\n"),e=0;e<h.length;e++){for(n=0,i=h[e].output,s=i.length,a=1,o=0;s>o;o++)r=i[o].score,c=p?p[i[o].key].weight:1,l=r*c,1!==c?a=Math.min(a,l):(n+=l,i[o].nScore=l);h[e].score=1===a?n/s:a,this.options.verbose&&t(h[e])}},o.prototype._sort=function(){var e=this.options;e.shouldSort&&(e.verbose&&t("\n\nSorting...."),this.results.sort(e.sortFn))},o.prototype._format=function(){var e,o,n,i,s,r=this.options,c=r.getFn,a=[],l=this.results,p=r.include;for(r.verbose&&t("\n\nOutput:\n\n",l),i=r.id?function(e){l[e].item=c(l[e].item,r.id,[])[0]}:function(){},s=function(e){var t,o,n,i,s,r=l[e];if(p.length>0){if(t={item:r.item},-1!==p.indexOf("matches"))for(n=r.output,t.matches=[],o=0;o<n.length;o++)i=n[o],s={indices:i.matchedIndices},i.key&&(s.key=i.key),t.matches.push(s);-1!==p.indexOf("score")&&(t.score=l[e].score)}else t=r.item;return t},o=0,n=l.length;n>o;o++)i(o),e=s(o),a.push(e);return a},s.defaultOptions={location:0,distance:100,threshold:.6,maxPatternLength:32},s.prototype._calculatePatternAlphabet=function(){var e={},t=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]=0;for(t=0;t<this.patternLen;t++)e[this.pattern.charAt(t)]|=1<<this.pattern.length-t-1;return e},s.prototype._bitapScore=function(e,t){var o=e/this.patternLen,n=Math.abs(this.options.location-t);return this.options.distance?o+n/this.options.distance:n?1:o},s.prototype.search=function(e){var t,o,n,i,s,c,a,l,p,h,d,u,f,g,v,m,$,y,w,D,C,A,x=this.options;if(e=x.caseSensitive?e:e.toLowerCase(),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};if(this.patternLen>x.maxPatternLength){if($=e.match(new RegExp(this.pattern.replace(r,"|"))),y=!!$)for(D=[],t=0,C=$.length;C>t;t++)A=$[t],D.push([e.indexOf(A),A.length-1]);return{isMatch:y,score:y?.5:1,matchedIndices:D}}for(i=x.location,n=e.length,s=x.threshold,c=e.indexOf(this.pattern,i),w=[],t=0;n>t;t++)w[t]=0;for(-1!=c&&(s=Math.min(this._bitapScore(0,c),s),c=e.lastIndexOf(this.pattern,i+this.patternLen),-1!=c&&(s=Math.min(this._bitapScore(0,c),s))),c=-1,v=1,m=[],p=this.patternLen+n,t=0;t<this.patternLen;t++){for(a=0,l=p;l>a;)this._bitapScore(t,i+l)<=s?a=l:p=l,l=Math.floor((p-a)/2+a);for(p=l,h=Math.max(1,i-l+1),d=Math.min(i+l,n)+this.patternLen,u=Array(d+2),u[d+1]=(1<<t)-1,o=d;o>=h;o--)if(g=this.patternAlphabet[e.charAt(o-1)],g&&(w[o-1]=1),u[o]=0===t?(u[o+1]<<1|1)&g:(u[o+1]<<1|1)&g|((f[o+1]|f[o])<<1|1)|f[o+1],u[o]&this.matchmask&&(v=this._bitapScore(t,o-1),s>=v)){if(s=v,c=o-1,m.push(c),!(c>i))break;h=Math.max(1,2*i-c)}if(this._bitapScore(t+1,i)>s)break;f=u}return D=this._getMatchedIndices(w),{isMatch:c>=0,score:0===v?.001:v,matchedIndices:D}},s.prototype._getMatchedIndices=function(e){for(var t,o=[],n=-1,i=-1,s=0,r=r=e.length;r>s;s++)t=e[s],t&&-1===n?n=s:t||-1===n||(i=s-1,o.push([n,i]),n=-1);return e[s-1]&&o.push([n,s-1]),o},"object"==typeof exports?module.exports=o:"function"==typeof define&&define.amd?define(function(){return o}):e.Fuse=o}(this);var e=angular.module("Reselect",["reselect.templates"]);e.service("ReselectDataAdapter",["$q",function(e){var t=function(){this.data=[]};return t.prototype.observe=function(){console.error("Not implemented")},t.prototype.prepareGetData=function(){},t.prototype.getData=function(t){var o,n=this,i=e.defer(),s={};if(t){var r=new Fuse(this.data,s);o=r.search(t),angular.isDefined(s.keys)&&(o=o.map(function(e){return n.data[e]}))}else o=this.data;return i.resolve({data:o}),i.promise},t.prototype.updateData=function(e){return this.data=e,this.data},t.prototype.init=function(){this.observe(this.updateData.bind(this))},t}]),e.service("ReselectAjaxDataAdapter",["$http",function(e){var t=function(e,t){this.data=[],this.page=1,this.pagination={},this.parsedOptions=t,this.options=angular.extend({params:function(e){return e}},e)};return t.prototype.observe=function(){},t.prototype.prepareGetData=function(){},t.prototype.getData=function(t){var o,n=this,i={page:this.page,search_term:t},s=this.options.params(i,n.pagination);return o="function"==typeof this.options.endpoint?this.options.endpoint(i,n.pagination):this.options.endpoint,e.get(o,{params:s}).then(function(e){return n.parsedOptions.source({$remote:e.data})}).then(this.options.onData).then(function(e){return e.pagination?(n.pagination=e.pagination,e.pagination.more&&(n.page+=1)):n.pagination=null,e})},t.prototype.updateData=function(e,t){return this.data=t===!0?this.data.concat(e):e,this.data},t.prototype.init=function(){},t}]),e.value("reselectDefaultOptions",{}).directive("reselect",["$compile",function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,replace:!0,scope:!0,link:function(e,t,o,n,i){function s(e,o,n,i,s){var a=c[0].querySelectorAll("."+e+",["+e+"],"+e);1===a.length?s===!0?angular.element(t[0].querySelector("."+e)).replaceWith(a):angular.element(t[0].querySelectorAll(o)).append(a):a=t[0].querySelectorAll("."+e),n&&i&&(r.transcludeCtrls[n]=angular.element(a).controller(i),r.transcludeScopes[n]=angular.element(a).scope())}var r=n[0],c=null;i(e,function(e){c=e,t.append(e)}).detach(),c=angular.element("<div>").append(c),s("reselect-choices",".reselect-dropdown","$ReselectChoice","reselectChoices"),s("reselect-no-choice",".reselect-empty-container",null,null,!0),s("reselect-placeholder",".reselect-rendered-placeholder","$ReselectPlaceholder","reselectPlaceholder",!0),s("reselect-selection",".reselect-rendered-selection","$ReselectSelection","reselectSelection",!0);var a=c[0].querySelectorAll(".reselect-choice, [reselect-choice], reselect-choice");r.transcludeCtrls.$ReselectChoice.registerChoices(a),r.$dropdown=angular.element(t[0].querySelector(".reselect-dropdown")).detach(),r.$dropdown[0].style.top="-999999px",r.$options_container=angular.element(r.$dropdown[0].querySelectorAll(".reselect-options-container"))},controllerAs:"$reselect",controller:["$scope","$element","$attrs","$parse","ReselectUtils","reselectDefaultOptions","$timeout","$window","KEYS",function(e,t,o,n,i,s,r,c,a){function l(o){t[0].contains(o.target)||(e.$safeApply(function(){p.hideDropdown(!0)}),angular.element(document).off("click",l))}var p=this,h=t.controller("ngModel");return p.options=angular.extend({},s,n(o.reselectOptions)(e)),p.value=null,p.opened=!1,p.isDropdownAbove=!1,p.transcludeCtrls={},p.transcludeScopes={},p.parsedChoices=null,p.DataAdapter=null,p.search_term="",p.isRemote=!1,p.isDisabled=!1,p.isFetching=!1,p.dropdownBuffer=50,p.scrollPos=0,p.$element=t[0],p.$dropdown=null,p.$options_container=null,p.selection_scope={},p.selection_scope.$selection=null,p.renderSelection=function(t,o){p.selection_scope.$selection=t,p.selection_scope.$choice=o,e.$broadcast("reselect.renderselection",p.selection_scope)},p.selectValue=function(e,t){h.$setViewValue(e),p.value=e,p.renderSelection(p.value,t||e),p._saveScrollPos(),p.opened&&p.hideDropdown()},p.clearSearch=function(){p.search_term=""},h.$render=function(){function e(e){var t={};return t[p.parsedOptions.itemName]=e,p.parsedOptions.modelMapper(t)}var t,o=h.$viewValue;if(angular.isDefined(o)){{var n,i,s=p.DataAdapter.data;p.parsedOptions.trackByExp}if(s&&s.length>=0)for(var r=0;r<s.length;r++)if(angular.isDefined(s[r])&&(n=e(s[r]),i=o,n===i)){t=s[r];break}}if(t)p.selectValue(h.$viewValue,t);else if(p.options.allowInvalid===!0)p.selectValue(o);else if(p.options.allowInvalid&&"function"==typeof p.options.allowInvalid){var c=function(t){void 0!==t?p.selectValue(e(t),t):p.selectValue(void 0)};p.options.allowInvalid(o,c)}else p.selectValue(void 0)},p.parsedOptions=null,p.choices=[],p.handleKeyDown=function(t){var o=t.which;p.opened?(o===a.ESC||o===a.TAB)&&(p.hideDropdown(),t.preventDefault()):o===a.ENTER||o===a.SPACE||o===a.UP||o===a.DOWN?(p.showDropdown(),t.preventDefault()):o===a.ESC&&(e.$emit("reselect.input.blur"),t.preventDefault())},p.toggleDropdown=function(){p.opened?p.hideDropdown():p.showDropdown()},p.showDropdown=function(){p.opened=!0,p.transcludeCtrls.$ReselectChoice.getData(!0).then(function(){p._positionDropdown(),p._appendDropdown(),p.isRemote||p._setScrollPos()}),e.$emit("reselect.search.focus"),angular.element(document).on("click",l)},p.hideDropdown=function(t){p.opened=!1,p.clearSearch(),p._removeDropdown(),t||e.$emit("reselect.input.focus")},p.bindEventListeners=function(){e.$on("reselect.hide",function(){e.$safeApply(function(){p.hideDropdown()})})},p._calculateDropdownPosition=function(e){var t=p.$element,o=(p.$dropdown[0],{top:t.offsetTop,left:t.offsetLeft,bottom:t.offsetTop+t.clientHeight,width:t.offsetWidth}),n={height:t.clientHeight},i={height:e},s={top:c.scrollY,bottom:c.scrollY+c.outerHeight},r=s.top<o.top-i.height+p.dropdownBuffer,a=s.bottom>o.bottom+i.height+n.height+p.dropdownBuffer;return p.isDropdownAbove=!1,a||!r||p.isDropdownAbove?!r&&a&&p.isDropdownAbove&&(p.isDropdownAbove=!1):p.isDropdownAbove=!0,o},p._calculateDropdownHeight=function(){var e=p.transcludeCtrls.$ReselectChoice.choiceHeight,t=p.transcludeCtrls.$ReselectChoice.listHeight+e,o=p.$dropdown[0].clientHeight;return o>=t?t:o},p._positionDropdown=function(){var t=i.requstAnimFrame();t(function(){var t=p._calculateDropdownHeight();e.$safeApply(function(){var e=p._calculateDropdownPosition(t);p.$dropdown[0].style.width=e.width+"px",p.$dropdown[0].style.top=p.isDropdownAbove?e.top-t+"px":e.bottom+"px",p.$dropdown[0].style.left=e.left+"px"})})},p._appendDropdown=function(){return document.querySelector("body").appendChild(p.$dropdown[0])},p._removeDropdown=function(){var e=document.querySelector("body");return e.contains(p.$dropdown[0])?e.removeChild(p.$dropdown[0]):void 0},p._saveScrollPos=function(){p.$options_container.length&&(p.scrollPos=p.$options_container[0].scrollTop)},p._setScrollPos=function(){var e=i.requstAnimFrame();e(function(){p.$options_container.length&&(p.$options_container[0].scrollTop=p.scrollPos)})},p.initialize=function(){p.bindEventListeners()},p.initialize(),p}]}}]),e.service("LazyScroller",["LazyContainer","$compile",function(e,t){var o={scopeName:"$choice"},n=function(e,t){var n=this;n.options=angular.extend({},o,t),n.$scope=e,n.$container=n.options.container,n.$list=n.options.list,n.choices=[],n.lazyContainers=[],n.numLazyContainers=Math.ceil(n.options.listHeight/n.options.choiceHeight)+2,n.lastCheck=null,n.lastScrollTop=null};return n.prototype.renderContainer=function(){var e=this,t=e.choices.length*e.options.choiceHeight,o=t>e.options.listHeight?e.options.listHeight:t;return e.$container.css("height",(o||e.options.choiceHeight)+"px"),e.$list.css("height",t+"px"),{choiceHeight:t,containerHeight:o}},n.prototype.bindScroll=function(){var e=this;e.$container.on("scroll",function(){window.requestAnimationFrame(function(){e._calculateLazyRender(),e.$scope.$apply()})})},n.prototype._shouldRender=function(e){var t=this;return!("number"==typeof t.lastCheck&&e<=t.lastCheck+(t.options.choiceHeight-t.lastCheck%t.options.choiceHeight)&&e>=t.lastCheck-t.lastCheck%t.options.choiceHeight)},n.prototype._calculateLazyRender=function(e){var t=this,o=t.$container[0].scrollTop;if(t.lastScrollTop=o,e===!0||t._shouldRender(o)){var n=[],i=[];angular.forEach(t.lazyContainers,function(s){var r=s.index*t.options.choiceHeight||0;e===!0&&(s.index=null),null===s.index||r<o-t.options.choiceHeight||r>o+t.options.listHeight+t.options.choiceHeight?(s.element.addClass("inactive").removeClass("active"),i.push(s)):(s.element.addClass("active").removeClass("inactive"),n.push(s))});var s=n.map(function(e){return e.index}),r=Math.floor(o/t.options.choiceHeight);r=0>r?0:r;var c=Math.ceil((o+t.options.listHeight)/t.options.choiceHeight);c=c>=t.choices.length?t.choices.length:c;for(var a=r;c>a;a++)if(!(s.indexOf(a)>=0)){var l=i.shift();l&&(l.element.addClass("active").removeClass("inactive"),l.index=a,l.render(t.options.choiceHeight),angular.extend(l.scope,{$containerId:l.containerId,$index:a,cssClass:t.choices[a]?t.choices[a].class:""}),t.choices[a]&&t.choices[a].$sticky===!0?(l.scope[t.options.scopeName]=t.choices[a].text,l.scope.$onClick=t.choices[a].onClick,l.scope.$sticky=t.choices[a].$sticky,l.scope.$stickyContent=t.choices[a].$stickyContent):(l.scope[t.options.scopeName]=t.choices[a],l.scope.$sticky=!1))}t.lastCheck=Math.floor(o/t.options.choiceHeight)*t.options.choiceHeight}},n.prototype.initialize=function(o){for(var n=this,i=0;i<n.numLazyContainers;i++){var s=o.clone(),r=n.$scope.$new();r.$options=n.$scope.$options,r[n.options.scopeName]={},t(s)(r),n.lazyContainers.push(new e({containerId:i,element:s,scope:r})),n.$list.append(s)}n.bindScroll()},n}]),e.service("LazyContainer",[function(){var e=function(e){var t=this;t.containerId=null,t.element=null,t.index=null,t.scope=null,angular.extend(t,e)};return e.prototype.render=function(e){var t=this;(t.element||null!==t.index)&&t.element.css("top",t.index*e+"px")},e}]),e.directive("reselectNoChoice",function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"templates/reselect-no-choice.directive.tpl.html"}}),e.value("reselectChoicesOptions",{noOptionsText:"No Options",choiceHeight:36,listHeight:300}),e.directive("triggerAtBottom",["$parse","ReselectUtils",function(e,t){var o=function(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight};return{restrict:"A",link:function(n,i,s){function r(){(o(i)+i[0].scrollTop!==0||0!==i[0].scrollHeight)&&(o(i)+i[0].scrollTop>=i[0].scrollHeight-30&&a(),c=!1)}var c=!1,a=t.debounce(function(){e(s.triggerAtBottom)(n)},150);i.on("scroll",function(){if(!c){var e=t.requstAnimFrame();e(r),c=!0}}),r()}}}]),e.directive("reselectChoices",["ChoiceParser","$compile","LazyScroller","LazyContainer","ReselectUtils","reselectChoicesOptions",function(e,t,o,n,i,s){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:["reselectChoices","?^reselect"],transclude:!0,replace:!0,compile:function(e,t){return t.options?function(e,t,o,n,i){{var s=n[0];n[1]}i(function(e){angular.element(s.CHOICE_TEMPLATE[0].querySelectorAll(".reselect-option-choice-container")).append(e)}),s.LazyDropdown.initialize(s.CHOICE_TEMPLATE),s.LazyDropdown.renderContainer()}:(console.warn("[reselect-options] directive requires the [options] attribute."),void 0)},controllerAs:"$options",controller:["$scope","$element","$attrs","$parse","$http","$timeout","ReselectDataAdapter","ReselectAjaxDataAdapter","KEYS",function(t,n,r,c,a,l,p,h,d){var u=n.controller("reselect"),f=this;f.options=angular.extend({},s,c(r.reselectChoices)(t)||{}),f.options.noOptionsText=r.noOptionsText||f.options.noOptionsText,f.element=n[0],f.$container=angular.element(f.element.querySelectorAll(".reselect-options-container")),f.$list=angular.element(f.element.querySelectorAll(".reselect-options-list")),f.$search=angular.element(f.element.querySelectorAll(".reselect-search-input")),f.choiceHeight=f.options.choiceHeight,f.listHeight=f.options.listHeight,f.remotePagination={},f.haveChoices=!1,f.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" style="height: {{$options.choiceHeight}}px" ng-click="$options._selectChoice($index, $onClick)"></li>'),f.CHOICE_TEMPLATE.append('<div class="reselect-option-choice-sticky" ng-show="$sticky === true" ng-bind-html="$stickyContent"></div>'),f.CHOICE_TEMPLATE.append('<div class="reselect-option-choice-container" ng-show="!$sticky"></div>'),f.CHOICE_TEMPLATE.attr("ng-class","[{'reselect-option-choice--highlight' : $options.activeIndex === $index, 'reselect-option-choice--selected' : $options.selectedIndex === $index }, cssClass]"),f.CHOICE_TEMPLATE.attr("ng-mouseenter","$options.activeIndex = $index"),f.CHOICE_TEMPLATE.attr("ng-mouseleave","$options.activeIndex = null"),f.stickyChoices=[],f.registerChoices=function(e){angular.forEach(e,function(e){e=angular.element(e);var t={"class":e.attr("class"),$sticky:!0,$stickyContent:e.html()};e.attr("ng-click")&&(t.onClick=e.attr("ng-click")),f.stickyChoices.push(t)})},f.keydown=function(e){var o=e.which;if(o&&!e.shiftKey&&!e.altKey)switch(o){case d.ENTER:t.$emit("reselect.select"),e.stopPropagation(),e.preventDefault();break;case d.SPACE:t.$emit("reselect.select"),e.stopPropagation(),e.preventDefault();break;case d.UP:t.$emit("reselect.previous"),e.stopPropagation(),e.preventDefault();break;case d.DOWN:t.$emit("reselect.next"),e.stopPropagation(),e.preventDefault()}},u.parsedOptions=e.parse(r.options),r.remote?(f.remoteOptions=c(r.remote)(t.$parent),u.isRemote=!0,u.DataAdapter=new h(f.remoteOptions,u.parsedOptions),u.DataAdapter.prepareGetData=function(){u.DataAdapter.page=1,u.DataAdapter.pagination={},u.DataAdapter.updateData([]),f.render()}):(u.DataAdapter=new p,u.DataAdapter.updateData(u.parsedOptions.source(t.$parent)),u.DataAdapter.observe=function(){t.$watchCollection(function(){return u.parsedOptions.source(t.$parent)},function(e){u.DataAdapter.updateData(e)})}),u.DataAdapter.init(),f.getData=function(e,t){return e===!0&&u.DataAdapter.prepareGetData(),f.is_loading=!0,u.DataAdapter.getData(u.search_term).then(function(e){u.search_term?f.render(e.data):(u.DataAdapter.updateData(e.data,t),f.render())}).finally(function(){f.is_loading=!1})},f.loadMore=function(){u.DataAdapter.pagination&&u.DataAdapter.pagination.more&&f.getData(!1,!0)},f.search=i.debounce(function(){f.getData(!0,!1)},300,!1,function(){f.is_loading=!0}),f.LazyDropdown=new o(t,{scopeName:u.parsedOptions.itemName,container:f.$container,list:f.$list,choiceHeight:f.choiceHeight,listHeight:f.listHeight}),f.activeIndex=null,f.selectedIndex=null,f._selectChoice=function(e,o){if(o)c(o)(t.$parent),u.hideDropdown();else{f.selectedIndex=e;var n=e,i={};i[u.parsedOptions.itemName]=f.LazyDropdown.choices[n];var s=angular.copy(u.parsedOptions.modelMapper(i));u.selectValue(s,i[u.parsedOptions.itemName])}},f.bindEventListeners=function(){t.$on("reselect.select",function(){f._selectChoice(f.activeIndex)}),t.$on("reselect.next",function(){var e=f.$container[0].offsetHeight,t=f.$container[0].scrollTop;null!==f.activeIndex?f.activeIndex<u.DataAdapter.data.length-1&&f.activeIndex++:f.activeIndex=0,t+e<f.activeIndex*f.choiceHeight+f.choiceHeight&&(f.$container[0].scrollTop=f.activeIndex*f.choiceHeight-e+f.choiceHeight)}),t.$on("reselect.previous",function(){var e=f.$container[0].scrollTop;f.activeIndex?f.activeIndex--:f.activeIndex=0,e>f.activeIndex*f.choiceHeight&&(f.$container[0].scrollTop=e-f.choiceHeight)}),f.$search.on("keydown",function(e){e.which===d.SPACE&&e.stopPropagation()})},f.render=function(e){if(f.LazyDropdown.choices=e||u.DataAdapter.data,f.LazyDropdown.choices=f.stickyChoices.concat(f.LazyDropdown.choices),f.LazyDropdown.choices&&f.LazyDropdown.choices.length>=0){f.haveChoices=!!f.LazyDropdown.choices.length;var t=f.LazyDropdown.renderContainer();f.LazyDropdown._calculateLazyRender(!0),f.LazyDropdown.choices&&f.LazyDropdown.choices.length&&t.containerHeight>=t.choiceHeight&&f.loadMore()}else f.haveChoices=!1},f.bindEventListeners()}]}}]),e.directive("reselectPlaceholder",function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"templates/reselect.placeholder.tpl.html"}}),e.directive("reselectSelection",function(){return{restrict:"AE",replace:!0,transclude:!0,templateUrl:"templates/reselect.selection.tpl.html",scope:{},link:function(e,t,o,n,i){i(e,function(e){t.append(e)})},controller:["$scope",function(e){e.$selection=null,e.$choice=null,e.$on("reselect.renderselection",function(t,o){angular.extend(e,o)})}]}}),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){var o;if(o=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!o)throw uiSelectMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",t);var n=o[5],i="";if(o[3]){n=o[5].replace(/(^\()|(\)$)/g,"");var s=o[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);s&&s[1].trim()&&(i=s[1],n=n.replace(i,""))}return{itemName:o[4]||o[2],keyName:o[3],source:e(n),sourceItem:n,filters:i,trackByExp:o[6],modelMapper:e(o[1]||o[4]||o[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}]),e.run(["$rootScope","$http",function(e){e.$safeApply=function(e){var t=this.$root.$$phase;"$apply"==t||"$digest"==t?e&&"function"==typeof e&&e():this.$apply(e)}}]),e.factory("ReselectUtils",["$timeout",function(e){var t={debounce:function(e,t,o,n){var i;return function(){var s=this,r=arguments,c=function(){i=null,o||e.apply(s,r)},a=o&&!i;clearTimeout(i),i=setTimeout(c,t),a&&e.apply(s,r),n&&n.apply(s,r)}},requstAnimFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||e}};return t}]),e.filter("rshighlight",["$sce",function(e){return function(t,o){var n,i,s,r="reselect-text-match";return s=new RegExp(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"ig"),t?o?(t.match&&t.replace||(t=t.toString()),i=t.match(s),n=i?t.replace(s,'<span class="'+r+'">'+i[0]+"</span>"):t,e.trustAsHtml(n)):t:void 0}}]),e.directive("focusOn",["$timeout",function(e){return{restrict:"A",link:function(t,o,n){t.$on(n.focusOn,function(){e(function(){o[0].focus()})})}}}]),e.directive("blurOn",["$timeout",function(e){return{restrict:"A",link:function(t,o,n){t.$on(n.blurOn,function(){e(function(){o[0].blur()})})}}}]),e.constant("KEYS",{BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/lazy-container.tpl.html",'<div class="reselect-dropdown"><div class="reselect-options-container"><div class="reselect-option reselect-option-choice" ng-show="!$reselect.choices.length">No Options</div><ul class="reselect-options-list"></ul></div></div>'),e.put("templates/reselect-no-choice.directive.tpl.html",'<div class="reselect-no-choice" ng-transclude=""></div>'),e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container reselect" tabindex="0" focus-on="reselect.input.focus" blur-on="reselect.input.blur" ng-keydown="$reselect.handleKeyDown($event)"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection-container" ng-class="{\'reselect-selection--active\' : $reselect.opened }" ng-click="$reselect.toggleDropdown()"><div class="reselect-rendered reselect-rendered-selection" ng-show="$reselect.value"><div class="reselect-selection" reselect-selection=""><span ng-bind="$selection"></span></div></div><div class="reselect-rendered reselect-rendered-placeholder" ng-show="!$reselect.value"><div class="reselect-placeholder" reselect-placeholder="">Please select an option</div></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div><div class="reselect-dropdown" ng-class="{\'reselect-dropdown--opened\' : $reselect.opened, \'reselect-dropdown--above\': $reselect.isDropdownAbove, \'reselect-dropdown--below\': !$reselect.isDropdownAbove }"></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-choices" ng-keydown="$options.keydown($event)"><div class="reselect-search-container"><input class="reselect-search-input" tabindex="-1" type="text" focus-on="reselect.search.focus" placeholder="Type to search..." ng-model="$reselect.search_term" ng-change="$options.search()"></div><div class="reselect-options-container" ng-class="{\'reselect-options-container--autoheight\': !$options.LazyDropdown.choices.length && !$options.is_loading }" trigger-at-bottom="$options.loadMore()"><ul class="reselect-options-list" ng-show="$options.LazyDropdown.choices.length"></ul><div class="reselect-static-option reselect-empty-container" ng-show="!$options.haveChoices && !$options.is_loading"><div class="reselect-no-choice" reselect-no-choice=""><div class="reselect-option reselect-option--static reselect-option-choice">{{$options.options.noOptionsText}}</div></div></div><div class="reselect-option reselect-static-option reselect-option-loading" ng-show="$options.is_loading">Loading More</div></div></div>'),e.put("templates/reselect.placeholder.tpl.html",'<div class="reselect-placeholder" ng-transclude=""></div>'),e.put("templates/reselect.selection.tpl.html",'<div class="reselect-selection"></div>')}])}).apply(this);
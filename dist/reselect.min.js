/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2015-12-29T04:32:32.336Z
 * License: MIT
 */
!function(){"use strict";var e=angular.module("Reselect",["reselect.templates"]);e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"}}).directive("reselect",[function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,replace:!0,scope:{ngModel:"=",reselectOptions:"="},compile:function(e,t,n){return function(e,t){n(e,function(e){t.append(e[1])})}},controllerAs:"$reselect",controller:["$scope","reselectDefaultOptions","$timeout",function(e,t){var n=this;return n.options=angular.extend({},e.reselectOptions,t),n.opened=!1,n.rendered_placeholder=n.options.placeholderTemplate(),n.value=null,n.selectValue=function(t){n.value=t,e.ngModel=t},n.parsedOptions=null,n.choices=[],n.toggleDropdown=function(){e.$broadcast("reselect.options."+(n.opened?"hide":"show")),n.opened=!n.opened},n}]}}]),e.value("reselectChoicesOptions",{}),e.service("LazyContainer",[function(){var e=function(e){var t=this;t.containerId=null,t.element=null,t.index=null,t.scope=null,angular.extend(t,e)};return e.prototype.render=function(e){var t=this;(t.element||null!==t.index)&&t.element.css("top",t.index*e+"px")},e}]),e.directive("reselectChoices",["ChoiceParser","$compile","LazyContainer",function(e,t,n){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:"^reselect",transclude:!0,replace:!0,compile:function(i,c){if(!c.options)throw new Error('"reselect-options" directive requires the [options] attribute.');return function(i,c,r,l,s){var o=i.$options={};o.CHOICE_TEMPLATE=null,s(function(e){o.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="$options._selectChoice($containerId)"></li>'),o.CHOICE_TEMPLATE.attr("ng-class","{'reselect-option-choice--highlight' : $options.activeIndex === $index }"),o.CHOICE_TEMPLATE.attr("ng-mouseenter","$options.activeIndex = $index"),o.CHOICE_TEMPLATE.attr("ng-mouseleave","$options.activeIndex = null"),o.CHOICE_TEMPLATE.append(e)}),o.element=c[0],o.$container=angular.element(o.element.querySelectorAll(".reselect-options-container")),o.$list=angular.element(o.element.querySelectorAll(".reselect-options-list")),o.choiceHeight=32,o.listHeight=300,l.parsedOptions=e.parse(r.options),l.choices=l.parsedOptions.source(i.$parent),o.lazyContainers=[],o.numLazyContainers=Math.ceil(o.listHeight/o.choiceHeight)+2,o.$container.css("height",o.listHeight+"px"),o.$list.css("height",o.choiceHeight*l.choices.length+"px"),o._initLazyContainers=function(){for(var e=0;e<o.numLazyContainers;e++){var c=o.CHOICE_TEMPLATE.clone(),r=i.$new();r.$choice={},t(c)(r),o.lazyContainers.push(new n({containerId:e,element:c,scope:r})),o.$list.append(c)}},o._initLazyContainers();var a,p=null,d=null;o._calculateLazyRender=function(){var e=o.$container[0].scrollTop;if(e>a?d="down":a>e&&(d="up"),a=e,!("number"==typeof p&&e<=p+o.choiceHeight&&e>=p-o.choiceHeight)){var t=[],n=[];angular.forEach(o.lazyContainers,function(i){var c=i.index*o.choiceHeight||0;null===i.index||c<e-o.choiceHeight||c>e+o.listHeight+o.choiceHeight?(i.element.addClass("inactive").removeClass("active"),n.push(i)):(i.element.addClass("active").removeClass("inactive"),t.push(i))});var c=t.map(function(e){return e.index}),r=Math.floor(e/o.choiceHeight);r=0>r?0:r;var s=Math.ceil((e+o.listHeight)/o.choiceHeight);s=s>=l.choices.length?l.choices.length:s;for(var u=r;s>u;u++)if(!(c.indexOf(u)>=0)){var h=n.shift();h&&(h.element.addClass("active").removeClass("inactive"),h.index=u,h.render(o.choiceHeight),angular.extend(h.scope,{$containerId:h.containerId,$index:u}),angular.extend(h.scope.$choice,l.choices[u]))}i.$evalAsync(),p=Math.floor(e/o.choiceHeight)*o.choiceHeight}},o.$container.on("scroll",function(){window.requestAnimationFrame(function(){o._calculateLazyRender()})}),o._calculateLazyRender(),o.activeIndex=null,o._setActiveIndex=function(e){o.activeIndex=e},o._selectChoice=function(e){var t=angular.copy(o.lazyContainers[e].scope.$eval(r.value));l.selectValue(t)};var u=c.parent();i.$on("reselect.options.show",function(){o.show()}),i.$on("reselect.options.hide",function(){o.hide()}),o.show=function(){u.append(c)},o.hide=function(){c.detach()}}}}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container reselect" ng-click="$reselect.toggleDropdown()"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection"><div class="reselect-rendered reselect-rendered-selection" ng-if="false" ng-bind="reselect.rendered_selection"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-if="true" ng-bind="reselect.rendered_placeholder"></div><div class="reselect-input-container"><input class="reselect-text-input" readonly="readonly" ng-if="true"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div><div class="reselect-options-container"><ul class="reselect-options-list"></ul></div></div>')}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){{var n;/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(t)}return n=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),{itemName:n[4]||n[2],keyName:n[3],source:e(n[3]?n[6]:n[5]),sourceName:n[6],filters:n[7],trackByExp:n[8],modelMapper:e(n[1]||n[4]||n[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}])}();
/*!
 * reselect
 * https://github.com/alexcheuk/Reselect
 * Version: 0.0.1 - 2015-12-25T22:16:40.824Z
 * License: MIT
 */
!function(){"use strict";var e=angular.module("Reselect",["reselect.templates"]);e.value("reselectDefaultOptions",{placeholderTemplate:function(){return"Select an option"}}).directive("reselect",[function(){return{restrict:"AE",templateUrl:"templates/reselect.directive.tpl.html",require:["^reselect","^ngModel"],transclude:!0,scope:{ngModel:"=",reselectOptions:"="},compile:function(e,t,c){return function(e,t){c(e,function(e){t.append(e[1])})}},controllerAs:"$reselect",controller:["$scope","reselectDefaultOptions",function(e,t){var c=this;return c.options=angular.extend({},e.reselectOptions,t),c.rendered_placeholder=c.options.placeholderTemplate(),c.selectValue=function(t){e.ngModel=t},c}]}}]),e.value("reselectChoicesOptions",{}),e.directive("reselectChoices",["ChoiceParser","$compile",function(e,t){return{restrict:"AE",templateUrl:"templates/reselect.options.directive.tpl.html",require:"^reselect",transclude:!0,compile:function(c,i){if(!i.options)throw new Error('"reselect-options" directive requires the [options] attribute.');return function(c,i,s,n,l){var r=c.choices={};r.CHOICE_TEMPLATE=null,l(function(e){r.CHOICE_TEMPLATE=angular.element('<li class="reselect-option reselect-option-choice" ng-click="choices.selectChoice($containerId)"></li>'),r.CHOICE_TEMPLATE.append(e)}),r.parsedOptions=e.parse(s.options),r.choices=r.parsedOptions.source(c.$parent);var o=i[0],a=angular.element(o.querySelectorAll(".reselect-options-container")),p=angular.element(o.querySelectorAll(".reselect-options-list"));r.choiceHeight=32,r.listHeight=300;var u=Math.ceil(r.listHeight/r.choiceHeight)+2;r.selectChoice=function(e){var t=angular.copy(r.lazyContainers[e].scope.$eval(s.value));n.selectValue(t)},a.css("height",r.listHeight+"px"),p.css("height",r.choiceHeight*r.choices.length+"px"),r.lazyContainers=[],r._calculate=function(){for(var e=0;u>e;e++){var i=r.CHOICE_TEMPLATE.clone(),s=c.$new();s.$choice={},t(i)(s),r.lazyContainers.push({containerId:e,element:i,scope:s}),p.append(i)}};var d,h=null,v=null;r._calculateLazyRender=function(){var e=a[0].scrollTop;if(e>d?v="down":d>e&&(v="up"),d=e,!("number"==typeof h&&e<=h+r.choiceHeight&&e>=h-r.choiceHeight)){var t=[],c=[];angular.forEach(r.lazyContainers,function(i){var s=i.index*r.choiceHeight||0;angular.isUndefined(i.index)||s<e-r.choiceHeight||s>e+r.listHeight+r.choiceHeight?(i.element.addClass("inactive").removeClass("active"),c.push(i)):(i.element.addClass("active").removeClass("inactive"),t.push(i))});var i=t.map(function(e){return e.index}),s=Math.floor(e/r.choiceHeight);s=0>s?0:s;var n=Math.ceil((e+r.listHeight)/r.choiceHeight);n=n>=r.choices.length?r.choices.length:n,console.log("Index Start",s),console.log("Index End",n);for(var l=s;n>l;l++)if(!(i.indexOf(l)>=0)){var o=c.shift();o&&(o.element.addClass("active").removeClass("inactive"),o.element.css("top",l*r.choiceHeight+"px"),o.index=l,o.scope.$containerId=o.containerId,o.scope.$index=l,angular.extend(o.scope.$choice,r.choices[l]),o.scope.$evalAsync())}h=Math.floor(e/r.choiceHeight)*r.choiceHeight}},a.on("scroll",function(){window.requestAnimationFrame(function(){r._calculateLazyRender()})}),window.up=r._calculateLazyRender,r._calculate(),r._calculateLazyRender()}}}}]),angular.module("reselect.templates",[]).run(["$templateCache",function(e){e.put("templates/reselect.choice.tpl.html",""),e.put("templates/reselect.directive.tpl.html",'<div class="reselect-container"><input type="hidden" value="{{ngModel}}"><div class="reselect-selection"><div class="reselect-rendered reselect-rendered-selection" ng-if="false" ng-bind="reselect.rendered_selection"></div><div class="reselect-rendered reselect-rendered-placeholder" ng-if="true" ng-bind="reselect.rendered_placeholder"></div><div class="reselect-input-container"><input class="reselect-text-input" readonly="readonly" ng-if="true"></div><div class="reselect-arrow-container"><div class="reselect-arrow"></div></div></div></div>'),e.put("templates/reselect.options.directive.tpl.html",'<div class="reselect-options-container"><ul class="reselect-options-list"></ul></div>')}]),e.service("ChoiceParser",["$parse",function(e){var t=this;t.parse=function(t){{var c;/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(t)}return c=t.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),{itemName:c[4]||c[2],keyName:c[3],source:e(c[3]?c[6]:c[5]),sourceName:c[6],filters:c[7],trackByExp:c[8],modelMapper:e(c[1]||c[4]||c[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}}}])}();